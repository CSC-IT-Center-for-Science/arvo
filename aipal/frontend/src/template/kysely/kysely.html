<h1>Kysely</h1>

<h3>Kyselyn nimi (näkyy vastaajalle)</h3>
<input type="text" ng-model="kysely.nimi_fi" />

<h3>Kyselyn kuvaus (näkyy vastaajalle)</h3>
<input type="text" ng-model="kysely.selite_fi" />

<h3>Voimassa</h3>

<pvm-valitsin
        otsikko="{{i18n.yleiset.alkaen}}"
        oletus-pvm="kysely.voimassa_alkupvm"
        valittu-pvm="kysely.voimassa_alkupvm"
        ng-model="kysely.voimassa_alkupvm"
        pakollinen="true">
</pvm-valitsin>
<pvm-valitsin
        otsikko="{{i18n.yleiset.asti}}"
        oletus-pvm="kysely.voimassa_loppupvm"
        valittu-pvm="kysely.voimassa_loppupvm"
        ng-model="kysely.voimassa_loppupvm"
        pakollinen="false">
</pvm-valitsin>

<popup-ikkuna nayta-popup="naytaLisaaKyselyPohjaPopup">
  <h2>{{i18n.kyselypohja.valinta}}</h2>

  <p>{{i18n.kyselypohja.valinta_ohjeistus}}</p>

  <select ng-model="kyselypohjaId" ng-options="pohja.kyselypohjaid as (pohja | lokalisoiKentta:'nimi') for pohja in kyselypohjat"></select>

  <button class="button button-with-icon add-icon-white" ng-click="lisaaKyselypohja(kyselypohjaId)" ng-disabled="!kyselypohjaId">{{i18n.kyselypohja.lisaa_valittu}}</button>
</popup-ikkuna>

<div class="kysymysryhma" ng-repeat="kysymysryhma in kysely.kysymysryhmat">
  <h1>{{kysymysryhma | lokalisoiKentta:'nimi' }}</h1>

  <div ng-repeat="kysymys in kysymysryhma.kysymys">
    <h2 ng-class="{removed: kysymys.poistettu}">{{kysymys | lokalisoiKentta:'kysymys'}} <a ng-click="poistaKysymys(kysymys)" ng-if="kysymys.poistettava && !kysymys.poistettu">[Poista]</a><a ng-click="palautaKysymys(kysymys)" ng-if="kysymys.poistettu">[Palauta]</a></h2>
  </div>
</div>

<div>
  <button class="button button-with-icon add-icon-white" ng-click="lisaaKyselyPohjaDialog()">{{i18n.kysely.lisaa_kyselypohja}}</button>
</div>
<div>
  <button class="button" ng-click="tallenna(kysely)">{{i18n.yleiset.tallenna}}&nbsp;<span class="glyphicon glyphicon-floppy-disk"></span></button>
</div>
