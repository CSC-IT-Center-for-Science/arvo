<h1>Kysely</h1>

<form role="form">
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <label for="kyselyn_nimi">Kyselyn nimi (näkyy vastaajalle)</label>
                <input type="text" class="form-control" ng-model="kysely.nimi_fi" id="kyselyn_nimi"/>
            </div>

            <div class="form-group">
                <label for="kyselyn_kuvaus">Kyselyn kuvaus (näkyy vastaajalle)</label>
                <input type="text" class="form-control" ng-model="kysely.selite_fi" id="kyselyn_kuvaus"/>
            </div>
        </div>
    </div>

    <h3>Voimassa</h3>

    <pvm-valitsin
            otsikko="{{i18n.yleiset.alkaen}}"
            oletus-pvm="kysely.voimassa_alkupvm"
            valittu-pvm="kysely.voimassa_alkupvm"
            ng-model="kysely.voimassa_alkupvm"
            pakollinen="true">
    </pvm-valitsin>
    <pvm-valitsin
            otsikko="{{i18n.yleiset.asti}}"
            oletus-pvm="kysely.voimassa_loppupvm"
            valittu-pvm="kysely.voimassa_loppupvm"
            ng-model="kysely.voimassa_loppupvm"
            pakollinen="false">
    </pvm-valitsin>

    <accordion close-others="true">
        <accordion-group ng-repeat="kysymysryhma in kysely.kysymysryhmat" is-open="group.open">
            <accordion-heading>
                {{kysymysryhma | lokalisoiKentta:'nimi' }} <i class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': group.open, 'glyphicon-chevron-right': !group.open}"></i>
            </accordion-heading>
            <ol class="kysymykset">
                <li ng-repeat="kysymys in kysymysryhma.kysymys">
                    <span ng-class="{removed: kysymys.poistettu}">{{kysymys | lokalisoiKentta:'kysymys'}}</span>&nbsp;
                    <a ng-click="poistaKysymys(kysymys)" ng-if="kysymys.poistettava && !kysymys.poistettu">Poista</a>
                    <a ng-click="palautaKysymys(kysymys)" ng-if="kysymys.poistettu">Palauta</a>
                </li>
            </ol>
        </accordion-group>
    </accordion>

    <div>
        <button class="button" ng-click="lisaaKyselypohjaModal()">
            {{i18n.kysely.lisaa_kyselypohja}}
            <span class="glyphicon glyphicon glyphicon-plus"></span>
        </button>
        <button class="button" ng-click="lisaaKysymysryhmaModal()">
            {{i18n.kysely.lisaa_kysymysryhma}}
            <span class="glyphicon glyphicon glyphicon-plus"></span>
        </button>
        <button class="button" ng-click="tallenna(kysely)">
            {{i18n.yleiset.tallenna}}&nbsp;
            <span class="glyphicon glyphicon-floppy-disk"></span>
        </button>
    </div>
</form>