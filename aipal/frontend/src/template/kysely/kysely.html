<h1>{{i18n.yleiset.kysely}}</h1>

<form role="form" name="kyselyForm">
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <label class="pakollinen" for="kyselyn_nimi">{{i18n.kysely.nimi_suomeksi}} ({{i18n.kysely.nakyy_vastaajalle}})</label>
                <input type="text" class="form-control" ng-model="kysely.nimi_fi" id="kyselyn_nimi" ng-required="true"/>
            </div>

            <div class="form-group">
                <label for="kyselyn_kuvaus">{{i18n.kysely.kuvaus_suomeksi}} ({{i18n.kysely.nakyy_vastaajalle}})</label>
                <input type="text" class="form-control" ng-model="kysely.selite_fi" id="kyselyn_kuvaus"/>
            </div>
        </div>
      <div class="col-md-4">
        <div class="form-group">
          <label for="kyselyn_nimi_sv">{{i18n.kysely.nimi_ruotsiksi}} ({{i18n.kysely.nakyy_vastaajalle}})</label>
          <input type="text" class="form-control" ng-model="kysely.nimi_sv" id="kyselyn_nimi_sv"/>
        </div>

        <div class="form-group">
          <label for="kyselyn_kuvaus_sv">{{i18n.kysely.kuvaus_ruotsiksi}} ({{i18n.kysely.nakyy_vastaajalle}})</label>
          <input type="text" class="form-control" ng-model="kysely.selite_sv" id="kyselyn_kuvaus_sv"/>
        </div>
      </div>
    </div>

    <h3>{{i18n.yleiset.voimassa}}</h3>

    <pvm-valitsin
            otsikko="{{i18n.yleiset.alkaen}}"
            oletus-pvm="kysely.voimassa_alkupvm"
            valittu-pvm="kysely.voimassa_alkupvm"
            min-pvm="'2000-01-01'"
            max-pvm="kysely.voimassa_loppupvm"
            ng-model="kysely.voimassa_alkupvm"
            pakollinen="true">
    </pvm-valitsin>
    <pvm-valitsin
            otsikko="{{i18n.yleiset.asti}}"
            oletus-pvm="kysely.voimassa_loppupvm"
            valittu-pvm="kysely.voimassa_loppupvm"
            min-pvm="kysely.voimassa_alkupvm"
            max-pvm="'2099-12-31'"
            ng-model="kysely.voimassa_loppupvm"
            pakollinen="false">
    </pvm-valitsin>

    <accordion close-others="true">
        <accordion-group ng-repeat="kysymysryhma in kysely.kysymysryhmat" is-open="group.open">
            <accordion-heading>
                {{kysymysryhma | lokalisoiKentta:'nimi' }} <i class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': group.open, 'glyphicon-chevron-right': !group.open}"></i>
            </accordion-heading>
            <ol class="kysymykset">
                <li ng-repeat="kysymys in kysymysryhma.kysymys">
                    <span ng-class="{removed: kysymys.poistettu}">{{kysymys | lokalisoiKentta:'kysymys'}}</span>&nbsp;
                    <a ng-click="poistaKysymys(kysymys)" ng-if="kysymys.poistettava && !kysymys.poistettu">Poista</a>
                    <a ng-click="palautaKysymys(kysymys)" ng-if="kysymys.poistettu">Palauta</a>
                </li>
            </ol>
        </accordion-group>
    </accordion>

    <div>
      <small><pakollisia-kenttia></pakollisia-kenttia></small>
      <button class="button" ng-click="lisaaKyselypohjaModal()">
        {{i18n.kysely.lisaa_kyselypohja}}
        <span class="glyphicon glyphicon glyphicon-plus"></span>
      </button>
      <button class="button" ng-click="lisaaKysymysryhmaModal()">
        {{i18n.kysely.lisaa_kysymysryhma}}
        <span class="glyphicon glyphicon glyphicon-plus"></span>
      </button>
    </div>
    <div lataus-indikaattori metodi-id="kyselynTallennus" viesti="{{'i18n.yleiset.tallennataan' | i18n}}" virheviesti="{{'i18n.yleiset.tallennus_epaonnistui' | i18n}}" yrita-uudelleen="tallenna()">
      <br>
      <button class="pull-left" ng-disabled="!kyselyForm.$valid" ng-click="tallenna()">{{'i18n.yleiset.tallenna'| i18n}}&nbsp;<span class="glyphicon glyphicon-floppy-disk"></span></button>
      <button class="btn-default pull-left" ng-click="peruuta()">{{'i18n.yleiset.peruuta' | i18n}}</button>
    </div>
</form>
