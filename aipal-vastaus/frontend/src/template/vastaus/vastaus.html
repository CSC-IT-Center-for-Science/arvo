<h1>{{data | lokalisoiKentta:'nimi'}}</h1>
<p class="tutkinto" ng-if="data.tutkintotunnus">{{data.tutkintotunnus}} {{data | lokalisoiKentta:'tutkinto_nimi'}}</p>
<p class="selite">{{data | lokalisoiKentta:'selite'}}</p>

<form name="vastausForm">
  <div ng-repeat="kysymysryhma in data.kysymysryhmat">
    <h2>{{kysymysryhma | lokalisoiKentta:'nimi'}}</h2>

    <div ng-repeat="kysymys in kysymysryhma.kysymykset">
      <h3>{{kysymys | lokalisoiKentta:'kysymys'}}<span ng-if="kysymys.pakollinen">*</span></h3>

      <span ng-if="kysymys.vastaustyyppi == 'vapaateksti'">
        <textarea ng-model="kysymys.vastaus" ng-required="kysymys.pakollinen"></textarea>
      </span>
      <span ng-if="kysymys.vastaustyyppi == 'kylla_ei_valinta'">
        <label style="display: block">
          <input type="radio" ng-model="kysymys.vastaus" value="kylla" name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen">
          {{ i18n.yleiset.kylla }}
        </label>
        <label style="display: block">
          <input type="radio" ng-model="kysymys.vastaus" value="ei" name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen">
          {{ i18n.yleiset.ei }}
        </label>
      </span>
      <span ng-if="kysymys.vastaustyyppi == 'asteikko'">
        <label ng-repeat="vaihtoehto in [1,2,3,4,5]" style="display: block">
          <input type="radio" ng-model="kysymys.vastaus" ng-value="vaihtoehto" name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen">
          {{ i18n.yleiset.asteikko[vaihtoehto] }}
        </label>
      </span>
      <span ng-if="kysymys.vastaustyyppi == 'monivalinta'">
        <label ng-repeat="vaihtoehto in kysymys.monivalintavaihtoehdot" style="display: block">
          <span ng-if="kysymys.monivalinta_max == 1">
            <input type="radio" ng-model="kysymys.vastaus" ng-value="vaihtoehto.jarjestys" name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen">
          </span>
          <span ng-if="kysymys.monivalinta_max > 1">
            <input type="checkbox" ng-model="vaihtoehto.valittu" ng-change="vaihdaMonivalinta(vaihtoehto, kysymys.kysymysid)"
              ng-disabled="monivalinta[kysymys.kysymysid] === kysymys.monivalinta_max && !vaihtoehto.valittu"
              name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen && (!monivalinta[kysymys.kysymysid] || monivalinta[kysymys.kysymysid] === 0)">
          </span>
          {{vaihtoehto | lokalisoiKentta:'teksti'}}
        </label>
      </span>
    </div>
  </div>
  <button id="submit" ng-click="tallenna()" ng-bind="i18n.yleiset.tallenna_vastaukset" ng-disabled="vastausForm.$error.required"></button>
</form>
