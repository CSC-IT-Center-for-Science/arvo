<h1>{{data.nimi_fi}}</h1>
<p class="tutkinto" ng-if="data.tutkintotunnus">{{data.tutkintotunnus}} {{data.tutkinto_nimi_fi}}</p>
<p class="selite">{{data.selite_fi}}</p>

<form ng-submit="tallenna()">
  <div ng-repeat="kysymysryhma in data.kysymysryhmat">
    <h2>{{ kysymysryhma.nimi_fi }}</h2>

    <div ng-repeat="kysymys in kysymysryhma.kysymykset">
      <h3>{{ kysymys.kysymys_fi }} </h3>

      <span ng-if="kysymys.vastaustyyppi == 'vapaateksti'">
        <textarea ng-model="kysymys.vastaus" ng-required="kysymys.pakollinen"></textarea>
      </span>
      <span ng-if="kysymys.vastaustyyppi == 'kylla_ei_valinta'">
        <label style="display: block">
          <input type="radio" ng-model="kysymys.vastaus" value="kylla" name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen">
          {{ i18n.yleiset.kylla }}
        </label>
        <label style="display: block">
          <input type="radio" ng-model="kysymys.vastaus" value="ei" name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen">
          {{ i18n.yleiset.ei }}
        </label>
      </span>
      <span ng-if="kysymys.vastaustyyppi == 'asteikko'">
        <label ng-repeat="vaihtoehto in [1,2,3,4,5]" style="display: block">
          <input type="radio" ng-model="kysymys.vastaus" ng-value="vaihtoehto" name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen">
          {{ i18n.yleiset.asteikko[vaihtoehto] }}
        </label>
      </span>
      <span ng-if="kysymys.vastaustyyppi == 'monivalinta'">
        <label ng-repeat="vaihtoehto in kysymys.monivalintavaihtoehdot" style="display: block">
          <span ng-if="kysymys.monivalinta_max == 1">
            <input type="radio" ng-model="kysymys.vastaus" ng-value="vaihtoehto.jarjestys" name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen">
          </span>
          <span ng-if="kysymys.monivalinta_max > 1">
            <input type="checkbox" ng-model="vaihtoehto.valittu" ng-change="vaihdaMonivalinta(vaihtoehto, kysymys.kysymysid)"
              ng-disabled="monivalinta[kysymys.kysymysid] === kysymys.monivalinta_max && !vaihtoehto.valittu"
              name="kysymys_{{kysymys.kysymysid}}" ng-required="kysymys.pakollinen && (!monivalinta[kysymys.kysymysid] || monivalinta[kysymys.kysymysid] === 0)">
          </span>
          {{vaihtoehto.teksti_fi}}
        </label>
      </span>
    </div>
  </div>
  <input type="submit" id="submit" ng-value="i18n.yleiset.tallenna_vastaukset">
</form>
